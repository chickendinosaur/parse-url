"use strict";function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}module.exports={parse:function(s,t){var h=new Url,n=0,l=0;if(n=s.indexOf("://"),n>=0&&(h.protocol=s.substring(0,n+1),h.slashes=!0,l=n+3),null!==h.protocol&&h.slashes===!0&&(n=s.indexOf("@",l),n>=0&&(h.auth=s.substring(l,n),l=n+1)),n=s.indexOf("/",l),n>=0){h.host=s.substring(l,n),l=n+1;var r=s.indexOf("#",l);r>=0&&(h.hash=s.substring(r));var e=s.indexOf("?",l);if(e>=0){var a=s.substring(e+1,r>=0?r:s.length),u=a.length;if(h.search="?"+a,u>0)if(t===!0){for(var i,o={},p=0,f="",c="";u>p;)f=a.charAt(p),"="!==f&&"&"!==f&&"#"!==f&&(c+=f),"="===f?(i=c,c=""):"&"!==f&&"#"!==f&&p!==u-1||(o[i]=c,c=""),++p;h.query=o}else h.query=a}var g=e>=0?e:r>=0?r:s.length;h.pathname=s.substring(n,g),h.path=h.pathname+h.search||""}else null!==h.protocol&&(h.host=s.substring(l));return null!==h.protocol?(n=h.host.indexOf(":"),n>=0?(h.port=h.host.substring(n+1),h.hostname=h.host.substring(0,n)):h.hostname=h.host):(h.pathname=h.host.substring(0,n)+h.pathname,h.path=h.pathname+h.search,h.host=null),h.href=s,h}};
